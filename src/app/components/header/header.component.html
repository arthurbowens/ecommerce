<header class="header" [class.scrolled]="headerScrolled">
  <div class="header-container">
    <!-- Logo -->
    <div class="logo">
      <a routerLink="/inicio" class="logo-link">
        <span class="logo-text">Óculos Store</span>
      </a>
    </div>

    <!-- Menu Desktop -->
    <nav class="nav-desktop" *ngIf="!buscaAberta">
      <ul class="nav-lista">
        <li>
          <a routerLink="/inicio" routerLinkActive="ativo" [routerLinkActiveOptions]="{exact: true}" class="nav-link">
            Início
          </a>
        </li>
        <li>
          <a routerLink="/produtos" routerLinkActive="ativo" class="nav-link">
            Produtos
          </a>
        </li>
        <li>
          <a href="#sobre" class="nav-link">Sobre</a>
        </li>
        <li>
          <a href="#contato" class="nav-link">Contato</a>
        </li>
      </ul>
    </nav>

    <!-- Ações Desktop -->
    <div class="acoes-desktop" *ngIf="!buscaAberta">
      <button class="icone-botao busca-toggle" (click)="toggleBusca()" aria-label="Buscar">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <a routerLink="/carrinho" class="icone-botao carrinho-link" aria-label="Carrinho">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 17.9 19 19 19C20.1 19 21 18.1 21 17V13M9 19.5C9.8 19.5 10.5 20.2 10.5 21C10.5 21.8 9.8 22.5 9 22.5C8.2 22.5 7.5 21.8 7.5 21C7.5 20.2 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21C21.5 21.8 20.8 22.5 20 22.5C19.2 22.5 18.5 21.8 18.5 21C18.5 20.2 19.2 19.5 20 19.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="carrinho-badge" *ngIf="quantidadeCarrinho > 0">{{ quantidadeCarrinho }}</span>
      </a>
    </div>

    <!-- Busca Desktop Expandida -->
    <div class="busca-desktop-expandida" *ngIf="buscaAberta">
      <form class="busca-form" (submit)="realizarBusca(); $event.preventDefault()">
        <input
          type="text"
          class="busca-input"
          placeholder="Buscar óculos, modelos, estilos..."
          [(ngModel)]="termoBusca"
          name="busca"
          autofocus
        />
        <button type="submit" class="busca-botao" aria-label="Buscar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button type="button" class="busca-fechar" (click)="fecharBusca()" aria-label="Fechar busca">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </form>
    </div>

    <!-- Botão Menu Mobile -->
    <button 
      class="menu-toggle" 
      (click)="toggleMenu()" 
      [attr.aria-expanded]="menuAberto"
      aria-label="Menu"
      *ngIf="!buscaAberta">
      <span class="hamburger" [class.ativo]="menuAberto">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>
  </div>

  <!-- Busca Mobile Expandida -->
  <div class="busca-mobile-expandida" *ngIf="buscaAberta">
    <form class="busca-form" (submit)="realizarBusca(); $event.preventDefault()">
      <input
        type="text"
        class="busca-input"
        placeholder="Buscar óculos, modelos, estilos..."
        [(ngModel)]="termoBusca"
        name="busca"
        autofocus
      />
      <button type="submit" class="busca-botao" aria-label="Buscar">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button type="button" class="busca-fechar" (click)="fecharBusca()" aria-label="Fechar busca">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </form>
  </div>

  <!-- Menu Mobile -->
  <nav class="nav-mobile" [class.ativo]="menuAberto">
    <div class="nav-mobile-overlay" (click)="fecharMenu()"></div>
    <div class="nav-mobile-content">
      <ul class="nav-lista-mobile">
        <li>
          <a routerLink="/inicio" routerLinkActive="ativo" [routerLinkActiveOptions]="{exact: true}" (click)="fecharMenu()" class="nav-link-mobile">
            Início
          </a>
        </li>
        <li>
          <a routerLink="/produtos" routerLinkActive="ativo" (click)="fecharMenu()" class="nav-link-mobile">
            Produtos
          </a>
        </li>
        <li>
          <a href="#sobre" (click)="fecharMenu()" class="nav-link-mobile">Sobre</a>
        </li>
        <li>
          <a href="#contato" (click)="fecharMenu()" class="nav-link-mobile">Contato</a>
        </li>
      </ul>
      <div class="nav-mobile-acoes">
        <a routerLink="/carrinho" (click)="fecharMenu()" class="nav-mobile-carrinho">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 17.9 19 19 19C20.1 19 21 18.1 21 17V13M9 19.5C9.8 19.5 10.5 20.2 10.5 21C10.5 21.8 9.8 22.5 9 22.5C8.2 22.5 7.5 21.8 7.5 21C7.5 20.2 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21C21.5 21.8 20.8 22.5 20 22.5C19.2 22.5 18.5 21.8 18.5 21C18.5 20.2 19.2 19.5 20 19.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Carrinho</span>
          <span class="carrinho-badge-mobile" *ngIf="quantidadeCarrinho > 0">{{ quantidadeCarrinho }}</span>
        </a>
      </div>
    </div>
  </nav>
</header>
